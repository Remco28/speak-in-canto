<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Admin - Users</title>
  </head>
  <body>
    <h1>User Management</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul>
          {% for category, message in messages %}
            <li data-category="{{ category }}">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <form method="post" action="{{ url_for('admin.users_create') }}">
      <label for="username">Username</label>
      <input id="username" name="username" type="text" required>

      <label for="password">Password</label>
      <input id="password" name="password" type="password" required>

      <label for="is_admin">Admin</label>
      <input id="is_admin" name="is_admin" type="checkbox">

      <button type="submit">Create User</button>
    </form>

    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Username</th>
          <th>Admin</th>
          <th>Created</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
          <tr>
            <td>{{ user.id }}</td>
            <td>{{ user.username }}</td>
            <td>{{ 'Yes' if user.is_admin else 'No' }}</td>
            <td>{{ user.created_at }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    <a href="{{ url_for('index') }}">Back to home</a>
  </body>
</html>
